<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:sec="https://joinfaces.org/security"
	template="/templateHome.xhtml">

	<ui:define name="content">
		<h:form id="registerForm">
			<p:panel id="panelFichaNuevoUsuario" header="Introduza los datos"
				class="ui-g-12 ui-md-12 ui-lg-12">

				<div class="ui-g">
					<div class="ui-g-12 ui-md-12 ui-lg-12">
					<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="roles" value="Rol" style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-8 ui-md-2">
								<h:selectOneMenu id="roles" value="#{registro.rolesSelected}">
									<f:selectItem itemLabel="" itemValue="" /> 
									<f:selectItems value="#{registro.listaRolesPorNombre}" />
									<p:ajax listener="#{registro.comprobarSiEsMedicoOPaciente}"
										update="registerForm" event="change" />
								</h:selectOneMenu>


							</div>
						</div>
						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="nombreLogin"
									value="Introduzca su nombre de usuario:"
									style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-8 ui-md-2">
								<h:inputText id="uname" value="#{registro.userName}"
									required="true"
									requiredMessage="Por favor introduzca su nombre de usuario" />
								<h:message for="uname" style="color:red" />
							</div>
						</div>
						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="nombreUsuario" value="Introduzca su nombre:"
									style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-8 ui-md-2">
								<p:inputText id="fname" value="#{registro.firstName}"
									required="true"
									requiredMessage="Por favor introduzca su nombre" />
								<h:message for="fname" style="color:red" />
							</div>
						</div>
						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="apellidoUsuario"
									value="Introduzca su apellido:" style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-8 ui-md-2">
								<p:inputText id="lname" value="#{registro.lastName}"
									required="true"
									requiredMessage="Por favor introduzca su apellido" />
								<h:message for="lname" style="color:red" />
							</div>
						</div>
						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="dniUsuario" value="Introduzca su D.N.I."
									style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-4 ui-md-2">
								<p:inputText id="dniUsuario" value="#{registro.dni}"
									required="true" requiredMessage="Por favor introduzca su D.N.I" />
								<h:message for="lname" style="color:red" />
							</div>
						</div>
						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="direccionUsuario"
									value="Introduzca su direccion" style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-8 ui-md-2">
								<p:inputText id="direccionUsuario" value="#{registro.direccion}"
									required="true"
									requiredMessage="Por favor introduzca su dirección" />
							</div>
						</div>
						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="telefonoUsuario"
									value="Introduzca su teléfono:" style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-8 ui-md-2">
								<p:inputNumber id="telefonoUsuario" value="#{registro.telefono}"
									required="true"
									requiredMessage="Por favor introduzca su teléfono" />

							</div>
						</div>
						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="emailUsuario" value="Introduzca su email:"
									style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-8 ui-md-2">
								<p:inputText id="email" value="#{registro.email}"
									required="true" requiredMessage="Por favor introduzca su email" />

							</div>
						</div>
						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="fechalUsuario"
									value="Introduzca su fecha de nacimiento:"
									style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-8 ui-md-2">
								<p:calendar id="fechaNacimiento"
									value="#{registro.fechaNacimiento}" required="true"
									requiredMessage="Por favor introduzca su fecha de nacimiento"
									pattern="dd-MM-yyyy" />

							</div>
						</div>

						

						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="contrasenaUsuario"
									value="Introduzca su contraseña :" style="font-weight:bold" />
								<br />
							</div>
							<div class="ui-g-8 ui-md-2">
								<h:inputSecret id="contrasenaUsuario"
									value="#{registro.password}" required="true"
									requiredMessage="Por favor introduzca su contraseña" />

							</div>
						</div>

						<div class="ui-g-12 ui-md-6">
							<div class="ui-g-4 ui-md-4">
								<h:outputLabel for="nombreMedico"
									value="Introduzca su nombre de médico :"
									style="font-weight:bold" rendered="#{registro.esMedico}" />
								<br />
								<h:outputLabel for="nombrePaciente"
									value="Introduzca su nombre de paciente :"
									style="font-weight:bold" rendered="#{registro.esPaciente}" />
								<br />
								
							</div>
							<div class="ui-g-8 ui-md-2">
								<h:inputText id="nombreMedico" value="#{registro.medico.nombre}"
									required="true"
									requiredMessage="Por favor introduzca su nombre de médico"
									rendered="#{registro.esMedico}" />
									
									<h:inputText id="nombrePaciente" value="#{registro.paciente.nombre}"
									required="true"
									requiredMessage="Por favor introduzca su nombre de paciente"
									rendered="#{registro.esPaciente}" />

							</div>
						</div>


						<!-- Botón Registrar -->
						<div class="ui-g-12">
							<div class="ui-g-12 ui-md-10" />
							<div class="ui-g-12 ui-md-2 botonera-wrapper">

								<p:commandButton value="Registrarse" action="#{registro.add}" />
							</div>
							<div class="ui-g-12 ui-md-10" />

							<div class="ui-g-12 ui-md-2 botonera-wrapper">
								<p:button id="botonVolver" value="Atrás" title="Atrás"
									outcome="home.xhtml">
								</p:button>
							</div>

						</div>

					</div>
				</div>
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>